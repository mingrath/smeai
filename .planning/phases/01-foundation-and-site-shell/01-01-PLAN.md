# Plan: 01-01 — Project Setup & Design System

**Phase:** 1 — Foundation & Site Shell
**Depends on:** Nothing
**Estimated tasks:** 3

## Goal

A buildable Astro 5 project with Tailwind v4, self-hosted Thai + English fonts, complete design system tokens, and development tooling -- ready for layout components in Plan 01-02.

## Context

This is a greenfield project. The working directory `/Users/ohmmingrath/Projects/smeai` contains only `.planning/` and `.git/`. We need to scaffold the entire Astro project from scratch. Tailwind v4 uses CSS-first configuration (no `tailwind.config.js`) -- all tokens go in `global.css` via `@theme`. Fontsource variable fonts provide a single file covering all weights 100-900, with CSS family names that include "Variable" (e.g., `'Noto Sans Thai Variable'`).

Key research findings to follow:
- Use `@tailwindcss/vite` plugin, NOT `@astrojs/tailwind` (deprecated for v4)
- Fonts: `@fontsource-variable/noto-sans-thai` and `@fontsource-variable/inter`
- No `tailwind.config.js` file -- everything via `@theme` in CSS
- Biome v2.4+ with `experimentalFullSupportEnabled: true` for `.astro` file support
- `.nvmrc` with `20` for Cloudflare Pages Node.js version

## Tasks

### Task 1: Scaffold Astro project and install all dependencies

**Do:**

1. Create the Astro project from the minimal template:
   ```bash
   cd /Users/ohmmingrath/Projects/smeai
   npm create astro@latest . -- --template minimal --typescript strict --skip-houston --no-git
   ```
   Use `--no-git` because the git repo already exists. Use `.` to scaffold in the current directory.

2. Install core dependencies:
   ```bash
   npm install tailwindcss @tailwindcss/vite @tailwindcss/typography
   npm install @fontsource-variable/noto-sans-thai @fontsource-variable/inter
   npm install preact @astrojs/preact
   npm install -D @biomejs/biome typescript
   ```

3. Configure `astro.config.mjs` to use the Tailwind vite plugin and Preact integration:
   ```javascript
   import { defineConfig } from 'astro/config';
   import tailwindcss from '@tailwindcss/vite';
   import preact from '@astrojs/preact';

   export default defineConfig({
     site: 'https://smeai.pages.dev',
     integrations: [preact()],
     vite: {
       plugins: [tailwindcss()],
     },
   });
   ```
   Note: `site` uses the default Cloudflare Pages subdomain. Will be updated when custom domain is configured.

4. Create `.nvmrc` in project root with content: `20`

5. Create `tsconfig.json` (Astro creates this, but ensure it extends `strict`):
   ```json
   {
     "extends": "astro/tsconfigs/strict"
   }
   ```

**Why:** Everything else depends on having a working, buildable Astro project with all packages installed.

**Files:**
- `astro.config.mjs`
- `tsconfig.json`
- `package.json`
- `package-lock.json`
- `.nvmrc`

### Task 2: Create design system CSS and font configuration

**Do:**

1. Create the directory structure:
   ```
   src/
   ├── assets/
   │   └── icons/        (empty, for SVG icons later)
   ├── components/
   │   └── common/       (empty, for components in 01-02)
   ├── layouts/           (empty, for BaseLayout in 01-02)
   ├── pages/
   │   └── index.astro   (minimal placeholder -- just renders "SMEAI" in an h1)
   └── styles/
       └── global.css
   ```

2. Create `src/styles/global.css` with the complete design system. This file IS the Tailwind configuration for v4:

   ```css
   @import "tailwindcss";
   @plugin "@tailwindcss/typography";

   /* Class-based dark mode toggle */
   @custom-variant dark (&:where(.dark, .dark *));

   @theme {
     /* === Color System: Blue-based trust palette with warm accents === */
     --color-primary-50: oklch(0.97 0.01 240);
     --color-primary-100: oklch(0.93 0.03 240);
     --color-primary-200: oklch(0.87 0.06 240);
     --color-primary-300: oklch(0.78 0.10 240);
     --color-primary-400: oklch(0.68 0.14 240);
     --color-primary-500: oklch(0.55 0.18 240);
     --color-primary-600: oklch(0.47 0.18 240);
     --color-primary-700: oklch(0.40 0.16 240);
     --color-primary-800: oklch(0.33 0.13 240);
     --color-primary-900: oklch(0.27 0.10 240);
     --color-primary-950: oklch(0.20 0.08 240);

     /* Accent: Warm amber/orange */
     --color-accent-50: oklch(0.97 0.02 75);
     --color-accent-100: oklch(0.93 0.04 70);
     --color-accent-200: oklch(0.87 0.08 65);
     --color-accent-300: oklch(0.78 0.12 55);
     --color-accent-400: oklch(0.70 0.15 45);
     --color-accent-500: oklch(0.62 0.17 40);
     --color-accent-600: oklch(0.55 0.17 35);

     /* Surface: Warm-tinted neutrals (not cold gray) */
     --color-surface-50: oklch(0.985 0.004 80);
     --color-surface-100: oklch(0.965 0.005 80);
     --color-surface-200: oklch(0.925 0.007 80);
     --color-surface-300: oklch(0.87 0.010 75);
     --color-surface-400: oklch(0.70 0.012 70);
     --color-surface-500: oklch(0.55 0.012 65);
     --color-surface-600: oklch(0.45 0.012 65);
     --color-surface-700: oklch(0.37 0.010 70);
     --color-surface-800: oklch(0.27 0.010 75);
     --color-surface-900: oklch(0.20 0.008 80);
     --color-surface-950: oklch(0.14 0.006 80);

     /* === Typography === */
     --font-sans: 'Noto Sans Thai Variable', 'Inter Variable', ui-sans-serif, system-ui, sans-serif;
     --font-heading: 'Noto Sans Thai Variable', 'Inter Variable', ui-sans-serif, sans-serif;

     /* === Spacing (Tailwind default: 0.25rem) === */
     --spacing: 0.25rem;

     /* === Border radius (rounded, approachable) === */
     --radius-sm: 0.375rem;
     --radius-md: 0.5rem;
     --radius-lg: 0.75rem;
     --radius-xl: 1rem;
     --radius-2xl: 1.5rem;
   }

   /* === Thai Typography Base Styles === */
   @layer base {
     html {
       font-size: 16px;
       -webkit-text-size-adjust: 100%;
     }

     body {
       line-height: 1.8;
       overflow-wrap: break-word;
       -webkit-font-smoothing: antialiased;
       -moz-osx-font-smoothing: grayscale;
     }

     h1, h2, h3, h4, h5, h6 {
       font-family: var(--font-heading);
       font-weight: 700;
       line-height: 1.4;
       letter-spacing: -0.01em;
     }

     .prose-container {
       max-width: 65ch;
       margin-inline: auto;
       padding-inline: 1rem;
     }
   }

   /* === Prose customization for Thai content === */
   @layer components {
     .prose {
       --tw-prose-body: var(--color-surface-800);
       --tw-prose-headings: var(--color-surface-900);
       --tw-prose-links: var(--color-primary-600);
       line-height: 1.8;
     }

     .dark .prose {
       --tw-prose-body: var(--color-surface-200);
       --tw-prose-headings: var(--color-surface-100);
       --tw-prose-links: var(--color-primary-400);
     }
   }
   ```

3. Create a minimal `src/pages/index.astro` placeholder that imports global.css and fonts to verify the build works:
   ```astro
   ---
   import '@fontsource-variable/noto-sans-thai';
   import '@fontsource-variable/inter';
   import '../styles/global.css';
   ---
   <html lang="th">
     <head>
       <meta charset="UTF-8" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <title>SMEAI</title>
     </head>
     <body class="bg-surface-50 text-surface-900 font-sans antialiased">
       <div class="min-h-screen flex items-center justify-center">
         <h1 class="text-4xl font-bold text-primary-600">SMEAI</h1>
       </div>
     </body>
   </html>
   ```
   This placeholder will be replaced by BaseLayout + real index.astro in Plan 01-02.

**Why:** The design system (colors, fonts, spacing, typography) must exist before any component can use it. Having a buildable index.astro proves the entire pipeline works.

**Files:**
- `src/styles/global.css`
- `src/pages/index.astro`
- `src/assets/icons/` (directory)
- `src/components/common/` (directory)
- `src/layouts/` (directory)

### Task 3: Configure development tooling and static assets

**Do:**

1. Create `biome.json` in project root:
   ```json
   {
     "$schema": "https://biomejs.dev/schemas/2.0.0/schema.json",
     "organizeImports": {
       "enabled": true
     },
     "formatter": {
       "enabled": true,
       "indentStyle": "tab",
       "indentWidth": 2,
       "lineWidth": 100
     },
     "linter": {
       "enabled": true,
       "rules": {
         "recommended": true
       }
     },
     "html": {
       "experimentalFullSupportEnabled": true
     },
     "files": {
       "ignore": ["dist/", "node_modules/", ".astro/"]
     }
   }
   ```

2. Create `public/robots.txt`:
   ```
   User-agent: *
   Allow: /

   Sitemap: https://smeai.pages.dev/sitemap-index.xml
   ```
   The sitemap URL will be updated when the sitemap is generated in Phase 3.

3. Create `public/favicon.svg` -- a minimal SVG placeholder:
   ```svg
   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
     <rect width="32" height="32" rx="6" fill="#4B6BFB"/>
     <text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" fill="white" font-family="system-ui" font-size="16" font-weight="bold">S</text>
   </svg>
   ```

4. Update `.gitignore` to include Astro-specific patterns. The Astro template creates one, but ensure it includes:
   ```
   # Astro
   dist/
   .astro/

   # Dependencies
   node_modules/

   # Environment
   .env
   .env.*
   !.env.example

   # OS
   .DS_Store

   # IDE
   .vscode/
   .idea/
   ```

5. Add npm scripts to `package.json` (merge with existing scripts from Astro template):
   ```json
   {
     "scripts": {
       "dev": "astro dev",
       "build": "astro build",
       "preview": "astro preview",
       "astro": "astro",
       "lint": "biome check .",
       "lint:fix": "biome check --write .",
       "format": "biome format --write ."
     }
   }
   ```

**Why:** Tooling and static assets complete the project foundation. Biome enforces consistent code style. The favicon and robots.txt are expected by browsers and crawlers from the first deployment.

**Files:**
- `biome.json`
- `public/robots.txt`
- `public/favicon.svg`
- `.gitignore`
- `package.json` (scripts section updated)

## Verification

- [ ] `npm run build` completes without errors and produces output in `dist/`
- [ ] `npm run dev` starts the dev server and the page loads at `http://localhost:4321`
- [ ] The "SMEAI" heading renders in blue (primary-600 color) with the Noto Sans Thai font
- [ ] `npx biome check .` runs without configuration errors
- [ ] `dist/index.html` exists after build and contains `lang="th"`
- [ ] `.nvmrc` file exists with content `20`
- [ ] `public/favicon.svg` and `public/robots.txt` exist
- [ ] No `tailwind.config.js` or `tailwind.config.mjs` file exists (Tailwind v4 is CSS-first)

## Requirements Addressed

- **SEO-05**: Self-hosted Noto Sans Thai + Inter fonts via Fontsource (installed and configured in global.css)
- **LAND-05**: Personal branding tone established through warm color palette, rounded border radii, and approachable design tokens
