---
import ContactLinks from './ContactLinks.astro';
---

<div
	id="mobile-nav"
	class="fixed inset-0 z-40 bg-surface-50/98 dark:bg-surface-950/98 backdrop-blur-sm translate-x-full transition-transform duration-300 ease-in-out md:hidden"
>
	<!-- Close button -->
	<button
		id="menu-close"
		type="button"
		aria-label="Close menu"
		class="absolute top-4 right-4 p-2 rounded-lg text-surface-600 hover:bg-surface-200 dark:text-surface-400 dark:hover:bg-surface-800 transition-colors"
	>
		<svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
			<path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
		</svg>
	</button>

	<!-- Navigation links -->
	<nav class="flex flex-col items-center justify-center h-full gap-8 text-xl font-medium">
		<a
			href="/"
			data-nav-link
			class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors"
		>Home</a>
		<a
			href="/articles"
			data-nav-link
			class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors"
		>Articles</a>
		<a
			href="/showcase"
			data-nav-link
			class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors"
		>Showcase</a>
		<a
			href="/contact"
			data-nav-link
			class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors"
		>Contact</a>

		<!-- Divider + contact links -->
		<div class="border-t border-surface-200 dark:border-surface-800 pt-8 mt-4">
			<ContactLinks variant="full" />
		</div>
	</nav>
</div>

<script>
	function initMobileNav() {
		const nav = document.getElementById('mobile-nav');
		const toggleBtn = document.getElementById('menu-toggle');
		const closeBtn = document.getElementById('menu-close');
		const navLinks = document.querySelectorAll('[data-nav-link]');

		if (!nav || !toggleBtn || !closeBtn) return;

		function openMenu() {
			nav.classList.remove('translate-x-full');
			nav.classList.add('translate-x-0');
			document.body.style.overflow = 'hidden';
		}

		function closeMenu() {
			nav.classList.remove('translate-x-0');
			nav.classList.add('translate-x-full');
			document.body.style.overflow = '';
		}

		toggleBtn.addEventListener('click', openMenu);
		closeBtn.addEventListener('click', closeMenu);

		for (const link of navLinks) {
			link.addEventListener('click', closeMenu);
		}
	}

	initMobileNav();

	document.addEventListener('astro:after-swap', initMobileNav);
</script>
