---
import ThemeToggle from './ThemeToggle.astro';
import ContactLinks from './ContactLinks.astro';
---

<header
	id="site-header"
	class="fixed top-0 left-0 right-0 z-50 bg-surface-50/90 dark:bg-surface-950/90 backdrop-blur-sm border-b border-surface-200/80 dark:border-surface-800/80 transition-transform duration-300"
>
	<nav class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
		<!-- Logo -->
		<a href="/" class="font-heading font-bold text-xl text-primary-600 dark:text-primary-400">
			SMEAI
		</a>

		<!-- Desktop navigation -->
		<ul class="hidden md:flex items-center gap-6 text-sm font-medium">
			<li>
				<a href="/" class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors">Home</a>
			</li>
			<li>
				<a href="/articles" class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors">Articles</a>
			</li>
			<li>
				<a href="/showcase" class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors">Showcase</a>
			</li>
			<li>
				<a href="/contact" class="text-surface-700 hover:text-primary-600 dark:text-surface-300 dark:hover:text-primary-400 transition-colors">Contact</a>
			</li>
		</ul>

		<!-- Right side actions -->
		<div class="flex items-center gap-1">
			<!-- Contact links (desktop only) -->
			<div class="hidden md:flex">
				<ContactLinks variant="compact" />
			</div>

			<!-- Theme toggle -->
			<ThemeToggle />

			<!-- Hamburger button (mobile only) -->
			<button
				id="menu-toggle"
				type="button"
				aria-label="Open menu"
				class="md:hidden p-2 rounded-lg text-surface-600 hover:bg-surface-200 dark:text-surface-400 dark:hover:bg-surface-800 transition-colors"
			>
				<svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
				</svg>
			</button>
		</div>
	</nav>
</header>

<script>
	function initScrollAway() {
		const header = document.getElementById('site-header');
		if (!header) return;

		let lastScrollY = window.scrollY;
		let ticking = false;

		function onScroll() {
			if (!ticking) {
				window.requestAnimationFrame(() => {
					const currentScrollY = window.scrollY;

					if (currentScrollY > 80 && currentScrollY > lastScrollY) {
						// Scrolling down past threshold
						header.classList.add('-translate-y-full');
					} else {
						// Scrolling up
						header.classList.remove('-translate-y-full');
					}

					lastScrollY = currentScrollY;
					ticking = false;
				});
				ticking = true;
			}
		}

		window.addEventListener('scroll', onScroll, { passive: true });
	}

	initScrollAway();

	document.addEventListener('astro:after-swap', initScrollAway);
</script>
