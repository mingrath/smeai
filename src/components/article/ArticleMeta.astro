---
import { getCategoryName } from '../../lib/categories';
import type { CategorySlug } from '../../lib/categories';

interface Props {
	readingTime: number;
	pubDate: Date;
	lastReviewed: Date;
	category: CategorySlug;
	tags: string[];
}

const { readingTime, pubDate, lastReviewed, category, tags } = Astro.props;

const dateOptions: Intl.DateTimeFormatOptions = {
	year: 'numeric',
	month: 'long',
	day: 'numeric',
};

const pubDateFormatted = pubDate.toLocaleDateString('th-TH', dateOptions);
const lastReviewedFormatted = lastReviewed.toLocaleDateString('th-TH', dateOptions);
---

<div class="mb-8 pb-6 border-b border-surface-200 dark:border-surface-700">
	<!-- Category badge + reading time -->
	<div class="flex flex-wrap items-center gap-3 mb-3 text-sm">
		<a
			href={`/articles/category/${category}/`}
			class="inline-flex items-center px-3 py-1 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors"
		>
			{getCategoryName(category)}
		</a>
		<span class="flex items-center gap-1 text-surface-500 dark:text-surface-400">
			<!-- Clock icon (Heroicons outline) -->
			<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
			</svg>
			อ่าน {readingTime} นาที
		</span>
	</div>

	<!-- Dates -->
	<div class="flex flex-wrap gap-x-4 gap-y-1 text-sm text-surface-500 dark:text-surface-400">
		<span>เผยแพร่: {pubDateFormatted}</span>
		<span class="flex items-center gap-1 text-primary-600 dark:text-primary-400 font-medium">
			<!-- Check badge icon -->
			<svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.745 3.745 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z" />
			</svg>
			ตรวจสอบล่าสุด: {lastReviewedFormatted}
		</span>
	</div>

	<!-- Tags -->
	{tags.length > 0 && (
		<div class="flex flex-wrap gap-2 mt-3">
			{tags.map((tag) => (
				<span class="inline-flex items-center px-2 py-0.5 rounded text-xs bg-surface-200 dark:bg-surface-700 text-surface-600 dark:text-surface-300">
					#{tag}
				</span>
			))}
		</div>
	)}
</div>
